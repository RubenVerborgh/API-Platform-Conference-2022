<!DOCTYPE html>
<html lang="en">
<head>
  <title>Decentralization, query APIs, and other myths</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <link rel="stylesheet" href="styles/screen-16x10.css">
  <link rel="stylesheet" href="styles/custom.css">
</head>
<body class="shower list">
  <header class="caption">
    <h1>Decentralization, query APIs, and other myths</h1>
    <p>
      <a href="https://ruben.verborgh.org/">Ruben Verborgh</a>,
      <a href="http://www.ugent.be/">Ghent University</a> –
      <a href="http://www.imec.be/">imec</a>
    </p>
    <p class="venue">
      <a href="https://api-platform.com/con/2022">API Platform Conference</a>,
      15 September 2022
    </p>
    <p>
      Based on my blog post
      <cite><a href="https://ruben.verborgh.org/blog/2021/12/23/reflections-of-knowledge/">Reflections of knowledge</a></cite>
    </p>
  </header>

  <div class="title slide" id="title">
    <h2>Decentralization, query APIs, <i>&amp;</i> other myths</h2>
    <p class="author">Ruben Verborgh</p>
    <p class="affiliation">Ghent University – imec</p>
  </div>

  <div class="slide" id="cave">
    <figure class="cover width">
      <img src="images/cave.webp" alt="[Plato's allegory of the cave]"/>
    </figure>
  </div>

  <div class="text slide" id="question">
    <p>
      How can Web clients interact with<br>
      decentralized knowledge graphs?
    </p>
  </div>

  <div class="text slide" id="multiple-apis">
    <p>
      <span class="next">The sum of</span> multiple knowledge graphs<br>
      <span class="next">is an even bigger knowledge graph.</span>
    </p>
    <p>
      <span class="next">The sum of</span> multiple Web APIs<br>
      <span class="next">is an even bigger <span class="next">mess</span>.</span>
    </p>
  </div>

  <div class="toc slide" id="toc">
    <ul>
      <li><a href="#toc-web-apis">Goodbye, query API</a></li>
      <li><a href="#toc-solid">Decentralization everywhere</a></li>
      <li><a href="#knowledge-apis">Reflecting knowledge in APIs</a></li>
    </ul>
  </div>

  <div class="toc slide" id="toc-web-apis">
    <ul>
      <li class="current"><a href="#toc-web-apis">Goodbye, query API</a></li>
      <li><a href="#toc-solid">Decentralization everywhere</a></li>
      <li><a href="#knowledge-apis">Reflecting knowledge in APIs</a></li>
    </ul>
  </div>

  <div class="slide" id="web-apis">
    <h2>
      Web APIs provide access to<br>
      remote data or functionality.
    </h2>
    <ol>
      <li class="next">
        action-oriented Web APIs
        <ul class="inline">
          <li>RPC</li>
          <li>SOAP</li>
          <li>XML</li>
          <li>…</li>
        </ul>
      </li>
      <li class="next">
        document-oriented Web APIs
        <ul class="inline">
          <li>REST APIs</li>
          <li>LDP</li>
          <li>…</li>
        </ul>
      </li>
      <li class="next">
        graph-oriented Web APIs
        <ul class="inline">
          <li>GraphQL</li>
          <li>SPARQL</li>
          <li>…</li>
        </ul>
      </li>
    </ol>
  </div>

  <div class="slide" id="language-and-api">
    <h2>
      SPARQL &amp; GraphQL share a common trait:<br>
      <span class="next">they are both a <em>language</em> and an <em>API</em>.</span>
    </h2>
    <figure class="next cover width margin">
      <img src="images/sparql-language-protocol.svg" alt="">
    </figure>
  </div>

  <div class="slide" id="graphql-one-source">
    <h2>
      GraphQL queries only have meaning<br>
      with respect to <em>one</em> source.
    </h2>
    <pre><code>


# List 10 people and their names
{
  person(first:10) {
    name
  }
}</code></pre>
  </div>

  <div class="slide" id="graphql-one-source-users">
    <h2>
      GraphQL queries only have meaning<br>
      with respect to <em>one</em> source.
    </h2>
    <pre><code>


# List 10 people and their names
{
  users(first:10) {
    fullName
  }
}</code></pre>
  </div>

    <div class="slide" id="graphql-one-source-friends">
    <h2>
      GraphQL queries only have meaning<br>
      with respect to <em>one</em> source.
    </h2>
    <pre><code>


# List 10 people and their names
{
  friends(first:10) {
    displayName
  }
}</code></pre>
  </div>

  <div class="slide" id="sparql-universal">
    <h2>
      SPARQL queries have universal meaning<br>
      across <em>all</em> possible sources.
    </h2>
    <pre><code><span class="prefix">PREFIX dbo:  &lt;http://dbpedia.org/ontology/&gt;
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>

# List 10 people and their names
SELECT * {
  ?person a dbo:Person;
          rdfs:label ?name.
}
LIMIT 10</code></pre>
  </div>

  <div class="slide" id="common-misconceptions">
    <h2>
      Common misconceptions prevent us from<br>
      designing effective knowledge graph APIs.
    </h2>
    <ol>
      <li><del class="next">Client abstractions require server abstractions.</del></li>
      <li><del class="next">Querying requires dedicated query interfaces.</del></li>
      <li><del class="next">One universal API can satisfy all use cases.</del></li>
    </ol>
  </div>

  <div class="slide" id="no-abstraction-limit">
    <h2>
      Client abstractions are not limited<br>
      to server-side abstractions.
    </h2>
    <ul>
      <li>
        We saw that <q>GraphQL</q> means actually 2 things:
        <ol>
          <li>a read/write query language</li>
          <li>a Web API for such queries</li>
        </ol>
      </li>
      <li class="next">
        Apps can be written using GraphQL<br>
        without the server offering a GraphQL API.
      </li>
      <li class="next">
        Client libraries can provide GraphQL queries<br>
        over non-GraphQL Web APIs.
      </li>
    </ul>
  </div>

  <div class="slide" id="no-query-api">
    <h2 class="next">
      The label <q>query API</q> is meaningless:<br>
      every API offers <em>some</em> kind of query.
    </h2>
    <ul>
      <li>
        Which API is a query API?
        <ol>
          <li><code>/orders<strong>?id=5787</strong></code></li>
          <li><code>/graphql<strong>?query={order(id:5787){product}}</strong></code></li>
        </ol>
      </li>
      <li class="next">
        Every API enables filtered data access.
        <ul>
          <li>
            The difference is the <em>granularity</em>.
          </li>
        </ul>
      </li>
      <li class="next">
        Client libraries can bridge the difference.
        <ul>
          <li>
            Execute queries over less expressive APIs.
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="no-universal-api">
    <h2>
      No single universal Web API exists<br>
      to satisfy all use cases.
    </h2>
    <ul>
      <li class="next">
        The more expressive the query language,<br>
        the more client-specific requests can be.
      </li>
      <li class="next">
        Web API design involves trade-offs.
        <ul>
          <li>Low expressivity leads to higher <em>numbers</em> of requests.</li>
          <li>High expressivity leads to higher <em>per-request cost</em>.</li>
        </ul>
      </li>
      <li class="next">
        Observations for single Web APIs<br>
        don’t always generalize to multiple APIs.
        <ul>
          <li>Cross-API queries are fundamentally different.</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="toc slide" id="toc-solid">
    <ul>
      <li><a href="#toc-web-apis">Goodbye, query API</a></li>
      <li class="current"><a href="#toc-solid">Decentralization everywhere</a></li>
      <li><a href="#knowledge-apis">Reflecting knowledge in APIs</a></li>
    </ul>
  </div>

  <div class="slide" id="solid">
    <h2>
      On the decentralized Web of the future,<br>
      every person has their own <em>data pod</em>.
    </h2>
    <ul>
      <li class="next">
        Web 1.0 is a decentralized document space.
        <ul>
          <li>Documents link to other documents.</li>
        </ul>
      </li>
      <li class="next">
        <a href="https://solidproject.org/">Solid</a> brings Web standards for personal data pods.
        <ul>
          <li>People store their data behind access control.</li>
          <li>Linked Data lets any piece of data to connect to any other.</li>
        </ul>
      </li>
      <li class="next">
        Multiple pods form a <em>decentralized knowledge graph</em>.
        <ul>
          <li>private and public parts</li>
          <li>too large for any single system</li>
        </ul>
      </li>
    </ul>
    <figure class="cover height">
      <img class="faded" src="images/solid-logo.svg" alt="[the Solid logo]" />
    </figure>
  </div>

  <div class="slide" id="data-pod">
    <h2>
      Data created <em>by</em> or <em>about</em> a person will be<br>
      stored in their personal knowledge graph.
    </h2>
    <figure class="cover width margin">
      <img src="images/data-pods.svg" alt="">
    </figure>
  </div>

  <div class="slide" id="decentralized-data">
    <h2>
      Apps over decentralized knowledge graphs<br>
      need to blend data from many sources.
    </h2>
    <figure class="cover height margin">
      <img src="images/decentralized-data.svg" alt="">
    </figure>
  </div>

  <div class="slide" id="views">
    <h2>
      A person can grant apps and people access<br>
      to very specific parts of their data.
    </h2>
    <figure class="cover width margin">
      <img src="images/apps-as-views.svg" alt="">
    </figure>
  </div>

  <div class="slide" id="markets">
    <h2>
      Separating app and storage competition<br>
      creates better offerings for all parties.
    </h2>
    <figure class="cover width margin">
      <img src="images/data-and-app-markets.svg" alt="">
    </figure>
  </div>

  <div class="slide" id="infinite-innovation">
    <h2>
      By abandoning data harvesting,<br>
      we restore permissionless innovation.
    </h2>
    <figure class="cover width margin">
      <img src="images/infinite-innovation.svg" alt="">
    </figure>
  </div>

  <div class="toc slide" id="knowledge-apis">
    <ul>
      <li><a href="#toc-web-apis">Goodbye, query API</a></li>
      <li><a href="#toc-solid">Decentralization everywhere</a></li>
      <li class="current"><a href="#knowledge-apis">Reflecting knowledge in APIs</a></li>
    </ul>
  </div>

  <div class="slide" id="abstract-knowledge">
    <h2>
      Decentralized apps require <em>query</em>:<br>
      read/write access to a knowledge graph.
    </h2>
    <figure class="cover width margin">
      <img src="images/abstract-knowledge.svg" alt="[a browser app needs access to knowledge]"/>
    </figure>
  </div>

  <div class="slide" id="abstract-transfer">
    <h2>
      Too big and complex for any single app,<br>
      the full graph is <em>emulated</em> via small parts.
    </h2>
    <figure class="cover width margin">
      <img src="images/abstract-transfer.svg" alt="[apps operate parts of the knowledge graph]"/>
    </figure>
  </div>

  <div class="slide" id="single-knowledge-api">
    <h2>
      Access to single-source knowledge parts<br>
      can be provided through a <em>Web API</em>.
    </h2>
    <figure class="cover width margin">
      <img src="images/single-knowledge-api.svg" alt="[accessing knowledge hosted on a single server]"/>
    </figure>
  </div>

  <div class="slide" id="single-json-api">
    <h2>
      <em>Document-oriented</em> Web APIs pretend<br>
      the graph is structured across documents.
    </h2>
    <figure class="cover width margin">
      <img src="images/single-json-api.svg" alt="[accessing knowledge through a single JSON API]"/>
    </figure>
  </div>

  <div class="slide" id="single-graphql-api">
    <h2>
      <em>Query-oriented</em> Web APIs combine data<br>
      of many documents of a document API.
    </h2>
    <figure class="cover width margin">
      <img src="images/single-graphql-api.svg" alt="[GraphQL APIs can access multiple conceptual resources]"/>
    </figure>
  </div>

  <div class="slide" id="multi-source-knowledge">
    <h2>
      Let’s examine the consequences of<br>
      <em>decentralizing</em> the knowledge graph.
    </h2>
    <figure class="cover width margin">
      <img src="images/multi-source-knowledge.svg" alt="[an application needs to access a knowledge graph that is distributed across multiple servers]"/>
    </figure>
  </div>

  <div class="slide" id="multi-source-apis">
    <h2>
      Every source exposes its part of the graph<br>
      through a <em>Linked Data</em> Web API.
    </h2>
    <figure class="cover width margin">
      <img src="images/multi-source-apis.svg" alt="[each server exposes an RDF API]"/>
    </figure>
  </div>

  <div class="slide" id="heterogeneous-apis">
    <h2>
      Several <em>different</em> Linked Data APIs exist,<br>
      each with vastly different characteristics.
    </h2>
    <figure class="cover width margin">
      <img src="images/heterogeneous-apis.svg" alt="[RDF can be exposed through different APIs]"/>
    </figure>
  </div>

  <div class="slide" id="heterogeneous-multi-apis">
    <h2>
      Each source can expose its same graph<br>
      through <em>multiple</em> different Web APIs.
    </h2>
    <figure class="cover width margin">
      <img src="images/heterogeneous-multi-apis.svg" alt="[each server might expose the same knowledge through multiple APIs]"/>
    </figure>
  </div>

  <div class="slide" id="graphql-multi-apis">
    <h2>
      No <em>single</em> query-oriented API can help us,<br>
      since there is no single server to attach to.
    </h2>
    <figure class="cover width margin">
      <img src="images/graphql-multi-apis.svg" alt="[we cannot attach a GraphQL API to any single server when the data resides in multiple servers]"/>
    </figure>
  </div>

  <div class="slide" id="graphql-client-side">
    <h2>
      The app can <em>still</em> be written using queries:<br>
      a library translates into HTTP requests.
    </h2>
    <figure class="cover width margin">
      <img src="images/graphql-client-side.svg" alt="[a client-side library translates GraphQL queries from the app into HTTP requests for different APIs and servers]"/>
    </figure>
  </div>

  <div class="slide" id="query">
    <h2>
      Query is crucial to app sustainability since<br>
      it allows apps to make fewer assumptions.
    </h2>
    <ul>
      <li class="next">
        Apps without query bind to specific Web APIs<br>
        rather than their underlying knowledge graphs.
        <ul>
          <li>
            They hardcode assumptions of where data is located<br>
            and how any specific API structures that data.
          </li>
        </ul>
      </li>
      <li class="next">
        Query can create a sustainable contract between<br>
        the app and the decentralized knowledge graph.
        <ul>
          <li>
            Bind to the data,
            not to a transport channel.
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="slide" id="transition">
    <h2>
      Moving to query means transitioning<br>
      from <em>API</em> integration to <em>data</em> integration.
    </h2>
    <ul>
      <li class="next">
        Current multi-source Web apps depend<br>
        on hardcoding Web API integrations.
        <ul>
          <li>Extensive client-side API tooling is available to do so.</li>
        </ul>
      </li>
      <li class="next">
        The central assumption in the transition is that<br>
        data integration is easier to solve sustainably.
      </li>
      <li class="next">
        However, this means we need to invest<br>
        in client-side <em>data integration</em> tooling.
      </li>
    </ul>
  </div>

  <div class="slide" id="api-as-a-service">
    <h2>
      Once we figure out the right core APIs,<br>
      we can build auxiliary APIs for use cases.
    </h2>
    <ul>
      <li class="next">
        The duty of the source is to securely expose data<br>
        for repurposing in different contexts.
      </li>
      <li class="next">
        More specific APIs can satisfy many different uses.
        <ul class="inline">
          <li>autocompletion</li>
          <li>indexing</li>
          <li>history</li>
          <li>…</li>
        </ul>
      </li>
      <li class="next">
        Dedicated <em>re-API</em> providers build on top of core APIs.
        <ul>
          <li>API as a service</li>
          <li>dockerized &amp; reusable</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="toc slide" id="recap">
    <ul>
      <li><a href="#toc-web-apis">Goodbye, query API</a></li>
      <li><a href="#toc-solid">Decentralization everywhere</a></li>
      <li><a href="#knowledge-apis">Reflecting knowledge in APIs</a></li>
    </ul>
  </div>

  <div class="slide" id="conclusion">
    <h2>
      Web APIs are a means to an end: <span class="next">we need<br>
      <em>client-side</em> knowledge graph tooling.</span>
    </h2>
    <ol class="next">
      <li>
        <span class="next">Client and API abstractions can differ.</span>
        <ul class="next">
          <li>Reusable client libraries separate the <em>what</em> from the <em>how</em>.</li>
        </ul>
      </li>
      <li>
        <span class="next">Every Web API is a query API.</span>
        <ul class="next">
          <li>
            Every Web client is a query client.<br>
            <em class="next">(whether you realize it or not)</em>
          </li>
        </ul>
      </li>
      <li>
        <span class="next">No single Web API is the final answer.</span>
        <ul class="next">
          <li>
            Design APIs as part of an ecosystem:<br>
            <em>how can APIs help—rather than replace—intelligent clients?</em>
          </li>
        </ul>
      </li>
    </ol>
  </div>

  <div class="slide" id="cave-end">
    <figure class="cover width">
      <img src="images/cave.webp" alt="[Plato's allegory of the cave]"/>
    </figure>
  </div>

  <div class="title slide" id="end">
    <h2>Decentralization, query APIs, <i>&amp;</i> other myths</h2>
    <p class="author"><a href="https://twitter.com/RubenVerborgh">@RubenVerborgh</a></p>
    <p class="affiliation"><a href="https://ruben.verborgh.org/">ruben.verborgh.org</a></p>
  </div>

  <footer>
    <p class="badge"><a href="https://github.com/RubenVerborgh/API-Platform-Conference-2022">View on GitHub</a></p>
    <p class="license">
      ©2017–2022 <a href="https://ruben.verborgh.org/">Ruben Verborgh</a> –
      Except where otherwise noted,
      the content of these slides is
      licensed under <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>.
    </p>
  </footer>
  <script src="scripts/shower.min.js"></script>
</body>
</html>
